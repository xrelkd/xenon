if ! has nix_direnv_version || ! nix_direnv_version 2.1.0; then
  source_url "https://raw.githubusercontent.com/nix-community/nix-direnv/2.1.0/direnvrc" "sha256-FAT2R9yYvVg516v3LiogjIc8YfsbWbMM/itqWsm5xTA="
fi

if "${NIX_BIN_PREFIX}nix" --extra-experimental-features '' --version 2>/dev/null >&2; then
  use flake
else
  echo -e '\e[38;5;3;1mwarning:\033[0m using legacy nix, upgrade nix version via `nix-env -iA nixpkgs.nixUnstable` if you want to use flake'
  use_nix
fi

watch_file ./shell.nix
